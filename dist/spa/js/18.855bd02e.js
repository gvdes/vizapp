(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[18],{"0694":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("q-page",{attrs:{padding:""}},[r("q-header",{staticClass:"bg-darkl0 text-grey-5 q-pa-sm"},[r("q-card",{staticClass:"bg-darkl1"},[r("toolbar-account",{attrs:{title:"Preventa"}})],1)],1),t.orders_capture.length?r("q-card",{staticClass:"bg-darkl0",attrs:{flat:""}},[r("q-card-section",[t._v("Pedidos activos [ "+t._s(t.orders_capture.length)+" ]")]),r("q-scroll-area",{staticStyle:{height:"90px",width:"100%"},attrs:{horizontal:"",visible:!1}},[r("div",{staticClass:"row no-wrap q-gutter-md text-grey-5"},t._l(t.orders_capture,(function(e){return r("q-card",{key:e.id,staticClass:"bg-darkl1",staticStyle:{"min-width":"170px"},on:{click:function(r){return t.open(e.id)}}},[r("div",{staticClass:"q-pa-sm"},[r("div",{staticClass:"text-h6"},[t._v(t._s(e.id))]),r("div",{staticClass:"text-uppercase text--1"},[t._v(t._s(e.name))]),r("div",{staticClass:"text-right text--2"},[t._v(t._s(e.created_at))])])])})),1)])],1):t._e(),r("q-card",{staticClass:"bg-darkl1 q-pb-sm q-my-md"},[r("q-card-section",[t._v("Resumen")]),r("q-separator"),r("apexchart",{attrs:{type:"donut",options:t.chart_1.options,series:t.series_chart}})],1),r("div",{staticClass:"bg-darkl1"},[r("q-card-section",[t._v("Tus pedidos")]),r("q-separator"),r("q-table",{attrs:{data:t.orders_db,"row-key":"id",dark:"",filter:t.tableorders.filtrator,"card-class":"q-pa-sm bg-none text-grey-6",columns:t.tableorders.columns},scopedSlots:t._u([t.orders_db.length?{key:"top-right",fn:function(){return[r("q-input",{attrs:{color:"green-13",dark:"",dense:"",debounce:"0",placeholder:"Buscar (folio o nombre)"},scopedSlots:t._u([{key:"append",fn:function(){return[r("q-icon",{attrs:{name:"search"}})]},proxy:!0}],null,!1,4009527860),model:{value:t.tableorders.filtrator,callback:function(e){t.$set(t.tableorders,"filtrator",e)},expression:"tableorders.filtrator"}})]},proxy:!0}:null,{key:"body",fn:function(e){return[r("q-tr",{attrs:{props:e},on:{click:function(r){return t.open(e.row.id)}}},[r("q-td",{key:"id",attrs:{props:e}},[t._v("\n\t\t\t\t\t\t\t"+t._s(e.row.id)+"\n\t\t\t\t\t\t")]),r("q-td",{key:"client",attrs:{props:e}},[t._v("\n\t\t\t\t\t\t\t"+t._s(e.row.name)+"\n\t\t\t\t\t\t")]),r("q-td",{key:"timed",attrs:{props:e}},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.humantime(e.row.created_at))+"\n\t\t\t\t\t\t")])],1)]}}],null,!0)})],1),r("q-dialog",{attrs:{position:"bottom"},model:{value:t.windCreate.state,callback:function(e){t.$set(t.windCreate,"state",e)},expression:"windCreate.state"}},[r("q-card",{staticClass:"bg-darkl0 exo text-grey-5"},[r("q-form",[r("q-toolbar",[t._v("Nuevo Pedido")]),r("q-card-section",[r("div",{staticClass:"row items-end q-gutter-sm"},[r("q-input",{staticClass:"col",attrs:{dark:"",label:"Cliente",color:"green-13",autofocus:""},model:{value:t.windCreate.ipt.client,callback:function(e){t.$set(t.windCreate.ipt,"client",e)},expression:"windCreate.ipt.client"}}),t.cancreate?r("q-btn",{attrs:{flat:"",rounded:"",type:"submit",icon:"done",color:"green-13",disable:t.windCreate.ipt.load,loading:t.windCreate.ipt.load},on:{click:t.tryCreate}}):t._e()],1)])],1)],1)],1),r("q-page-sticky",{attrs:{position:"bottom-right",offset:[10,3]}},[r("q-btn",{staticClass:"bg-darkl1 shadow-1",attrs:{rounded:"",flat:"",color:"green-13",icon:"add"},on:{click:function(e){t.windCreate.state=!0}}})],1)],1)},s=[],o=(r("e6cf"),r("1321")),n=r.n(o),i=r("bd4c"),c=r("1d6c"),l=r("31b8"),d={autocomplete(t){return l["b"].get("/product/autocomplete",t)},create(t){return l["b"].post("/order",t)},index(){return l["b"].get("/order").then((t=>{let e=t.data;return console.log(e),e})).catch((t=>{console.log(t)}))}},u={components:{apexchart:n.a,ToolbarAccount:c["a"]},data(){return{chart_1:{options:{chart:{id:"orders_chart",background:"none"},stroke:{colors:["#2D3035"]},theme:{palette:"palette8",mode:"dark"},labels:["En captura","Por surtir","Surtiendo","Cobrados","Completados"],colors:["#ced6e0","#fa8231","#1e90ff","#4cd137","#eb3b5a"]}},windCreate:{state:!1,ipt:{dis:!0,load:!1,client:""}},index:void 0,tableorders:{columns:[{name:"id",align:"left",label:"Folio",field:"id"},{name:"client",align:"left",label:"Cliente",field:"name",sortable:!0},{name:"timed",align:"center",label:"Hora",field:"created_at",sortable:!0}],filtrator:""}}},async beforeMount(){this.index=await d.index()},methods:{tryCreate(){this.windCreate.ipt.load=!0;let t={name:this.windCreate.ipt.client};d.create(t).then((t=>{let e=t.data;this.$router.push("/preventa/"+e.id)})).catch((t=>{console.log(t)})),console.log(t)},open(t){this.$router.push("/preventa/"+t)}},computed:{cancreate(){return this.windCreate.ipt.client.length>3},orders_db(){return this.index?this.index.orders:[]},orders_capture(){return this.orders_db.filter((t=>1==t.status.id))},orders_forsupply(){return this.orders_db.filter((t=>2==t.status.id))},orders_onsupply(){return this.orders_db.filter((t=>3==t.status.id))},orders_chargeds(){return this.orders_db.filter((t=>4==t.status.id))},orders_archive(){return this.orders_db.filter((t=>5==t.status.id))},series_chart(){return[this.orders_capture.length,this.orders_forsupply.length,this.orders_onsupply.length,this.orders_chargeds.length,this.orders_archive.length]},humantime(){return t=>{let e=Date.now(),r=Date.parse(t),a=i["b"].getDateDiff(e,r,"days");switch(a){case 0:return i["b"].formatDate(r,"hh:mm a");case 1:return"Ayer, "+i["b"].formatDate(r,"hh:mm a");default:return`Hace ${a} dias, `+i["b"].formatDate(r,"hh:mm a")}}}}},p=u,h=r("2877"),b=r("9989"),m=r("e359"),f=r("f09f"),g=r("a370"),_=r("4983"),q=r("eb85"),k=r("eaac"),w=r("27f9"),v=r("0016"),y=r("bd08"),C=r("db86"),x=r("24e8"),Q=r("0378"),S=r("65c6"),$=r("9c40"),D=r("de5e"),A=r("eebe"),T=r.n(A),I=Object(h["a"])(p,a,s,!1,null,null,null);e["default"]=I.exports;T()(I,"components",{QPage:b["a"],QHeader:m["a"],QCard:f["a"],QCardSection:g["a"],QScrollArea:_["a"],QSeparator:q["a"],QTable:k["a"],QInput:w["a"],QIcon:v["a"],QTr:y["a"],QTd:C["a"],QDialog:x["a"],QForm:Q["a"],QToolbar:S["a"],QBtn:$["a"],QPageSticky:D["a"]})},"1d6c":function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("q-toolbar",{staticClass:"row justify-between items-center"},[r("span",[t.iconlauncher?r("q-btn",{attrs:{dense:"",rounded:"",flat:"",icon:"fab fa-atlassian fa-rotate-180"},on:{click:function(e){return t.$router.push("/")}}}):r("q-icon",{attrs:{name:"fab fa-atlassian fa-rotate-180",size:"25px"}})],1),r("span",{staticClass:"col text-center"},[r("span",[t._v(t._s(t.workin.workpoint.alias))]),r("br"),r("span",[t._v(t._s(t.title))])]),r("span",{staticClass:"text-right"},[r("q-btn",{attrs:{rounded:"",dense:"",color:t.sockstate?"green-13":""}},[r("q-img",{staticStyle:{height:"30px",width:"30px"},attrs:{src:t.picnick,"spinner-color":"white"}}),r("q-menu",{attrs:{dark:"","transition-show":"flip-right","transition-hide":"flip-left"}},[r("q-list",{staticClass:"exo text-grey-6",staticStyle:{"min-width":"150px"}},[r("q-item",{attrs:{clickable:""},on:{click:function(e){return t.$router.push("/perfil")}}},[r("q-item-section",{attrs:{avatar:""}},[r("q-icon",{attrs:{name:"fas fa-user-astronaut"}})],1),r("q-item-section",[t._v("Hola "+t._s(t.session.me.nick))])],1),r("q-separator"),r("q-item",{attrs:{clickable:""},on:{click:t.sessionDestroy}},[r("q-item-section",{attrs:{avatar:""}},[r("q-icon",{attrs:{name:"meeting_room"}})],1),r("q-item-section",[t._v("Salir")])],1)],1)],1)],1)],1)])},s=[],o={name:"ToolbarAccount",props:{title:{type:String,default:""},iconlauncher:{type:Boolean,default:!0},sockstate:{type:Boolean,default:!1}},methods:{sessionDestroy(){this.$store.commit("Account/unsetsession"),this.$router.push("/acceso")}},computed:{session:{get(){return this.$store.state.Account.profile}},workin:{get(){return this.$store.state.Account.workin}},workpoints:{get(){return this.$store.state.Account.workpoints}},picnick(){return this.session.me.pictures?this.session.me.pictures:"https://www.iconfinder.com/data/icons/avatars-15/64/_Ninja-2-512.png"}}},n=o,i=r("2877"),c=r("65c6"),l=r("9c40"),d=r("0016"),u=r("068f"),p=r("4e73"),h=r("1c1c"),b=r("66e5"),m=r("4074"),f=r("eb85"),g=r("eebe"),_=r.n(g),q=Object(i["a"])(n,a,s,!1,null,null,null);e["a"]=q.exports;_()(q,"components",{QToolbar:c["a"],QBtn:l["a"],QIcon:d["a"],QImg:u["a"],QMenu:p["a"],QList:h["a"],QItem:b["a"],QItemSection:m["a"],QSeparator:f["a"]})}}]);