(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[38],{"028d":function(t,s,a){"use strict";a.r(s);var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("q-page",[a("q-header",{staticClass:"bg-darkl0 QuickRegular"},[a("q-card",{staticClass:"bg-darkl1"},[a("HeaderApp",{attrs:{title:"Ajuste"}}),a("q-card-section",[a("ProductAutocomplete",{attrs:{"check-state":!1,"workpoint-status":[1,2],"val-state-cedis":1},on:{input:t.selectedProd}})],1)],1)],1),t.product?a("div",{staticClass:"QuickRegular text-white q-pt-sm"},[a("q-card",{staticClass:"bg-darkl1 bg-none",attrs:{flat:""}},[a("div",{staticClass:"q-pa-md text-center"},[a("div",{staticClass:"text-h5"},[t._v(t._s(t.product.code))]),a("div",{staticClass:"text--2"},[t._v(t._s(t.product.description))])]),a("q-card-section",[a("q-card",{staticClass:"bg-none row items-center"},[a("q-select",{staticClass:"col",attrs:{dark:"",color:"green-13",filled:"",options:t.optionStates,"option-value":"id","option-label":"name",label:"Estatus"},on:{input:t.freshState},model:{value:t.state,callback:function(s){t.state=s},expression:"state"}}),t.wkpData?[a("q-input",{staticClass:"col",attrs:{filled:"",type:"number",dark:"",label:"Minimo",color:"green-13",min:"0"},on:{change:t.setChanges},model:{value:t.wkpData.min,callback:function(s){t.$set(t.wkpData,"min",s)},expression:"wkpData.min"}}),a("q-input",{staticClass:"col",attrs:{filled:"",type:"number",dark:"",label:"Maximo",color:"green-13",min:"0"},on:{change:t.setChanges},model:{value:t.wkpData.max,callback:function(s){t.$set(t.wkpData,"max",s)},expression:"wkpData.max"}})]:t._e()],2),t.showSave?a("q-btn",{staticClass:"full-width q-py-md",attrs:{color:"primary",label:"Aplicar Cambios","no-caps":"",icon:"done"},on:{click:t.saveChanges}}):t._e(),t.wkpData?a("div",{staticClass:"q-mt-md row justify-around"},[a("div",{staticClass:"text-center q-px-md"},[a("div",{staticClass:"text-h5"},[t._v(t._s(t.product.pieces))]),a("div",{staticClass:"text--2"},[t._v("PxC")])]),a("div",{staticClass:"text-center q-px-md"},[a("div",{staticClass:"text-h5"},[t._v(t._s(t.wkpData.stock))]),a("div",{staticClass:"text--2"},[t._v("Stock")])])]):a("div",{staticClass:"text-amber-13 q-mt-md"},[t._v("Producto sin Stocks")])],1),t.stocksWkps&&t.stocksWkps.length?[a("div",{staticClass:"row justify-around"},t._l(t.stocksWkps,(function(s){return a("q-card",{key:s._workpoint,staticClass:"q-pa-md bg-darkl2"},[a("div",{staticClass:"text-overline"},[t._v(t._s(s.name))]),a("div",[t._v("Stock: "+t._s(s.stock))]),a("div",[t._v("Estatus: "+t._s(s.status.name))])])})),1)]:t._e()],2)],1):t._e()],1)},i=[],o=a("5ed6"),c=a("f7cb"),n=a("1670"),r=a("b293"),l={components:{ProductAutocomplete:r["a"],HeaderApp:n["a"]},data(){return{listStates:null,product:void 0,state:void 0,cmin:void 0,cmax:void 0,showSave:!1}},async mounted(){console.log("%cMontando minimos y maximos","font-size:1.5em; color:gold;"),this.listStates=await c["a"].listStates()},methods:{async saveChanges(){let t={id:this.product.id,min:this.wkpData.min,max:this.wkpData.max},s=await o["a"].setminmax(t);console.log(s),s.error?this.$q.notify({message:s.error,icon:"fas fa-bug",timeout:3e3,color:"negative",position:"center"}):(this.$q.notify({message:"Actualizado!",icon:"done",timeout:1500,color:"positive",position:"center"}),this.cmin=this.wkpData.min,this.cmax=this.wkpData.max,console.log(this.cmin==this.wkpData.min),console.log(this.cmax==this.wkpData.max),this.showSave=!1)},setChanges(){this.showSave=this.cmin!=this.wkpData.min||this.cmax!=this.wkpData.max},selectedProd(t){console.log("Producto Seleccionado"),console.log(t),this.product=void 0,this.product=t,this.state=t.status,this.wkpData&&(this.cmin=this.wkpData.min,this.cmax=this.wkpData.max)},async freshState(){let t={_product:this.product.id,_status:this.state.id},s=await c["a"].freshState(t);s.error?this.$q.notify({message:"El status no pudo actualizarse :(",color:"negative",icon:"fas fa-bug",timeout:1500}):this.$q.notify({message:"Producto actualizado!",timeout:1500,color:"positive",position:"center",icon:"done",html:!0})}},computed:{ismobile(){return this.$q.platform.is.mobile},profile(){return this.$store.getters["Account/profile"]},workin(){return this.$store.getters["Account/workin"]},wkpData(){return this.product?this.product.stocks.find((t=>this.workin.workpoint.id==t._workpoint)):void 0},stocksWkps(){return this.product?this.product.stocks.filter((t=>this.workin.workpoint.id!=t._workpoint)):void 0},optionStates(){return this.listStates?this.listStates.filter((t=>t.id<=3||6==t.id)):[]}}},d=l,p=a("2877"),u=a("9989"),m=a("e359"),h=a("f09f"),k=a("a370"),v=a("ddd8"),w=a("27f9"),g=a("9c40"),f=a("eebe"),x=a.n(f),C=Object(p["a"])(d,e,i,!1,null,null,null);s["default"]=C.exports;x()(C,"components",{QPage:u["a"],QHeader:m["a"],QCard:h["a"],QCardSection:k["a"],QSelect:v["a"],QInput:w["a"],QBtn:g["a"]})}}]);