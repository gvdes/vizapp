(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[16],{"2b3a":function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("q-page",[r("q-header",{staticClass:"bg-darkl1",attrs:{unelevated:""}},[r("div",{directives:[{name:"show",rawName:"v-show",value:t.stateDelete,expression:"stateDelete"}],staticClass:"row items-stretch justify-between"},[r("q-btn",{attrs:{flat:"",icon:"close"},on:{click:function(e){return t.$router.push("/pedidos/")}}}),r("div",{staticClass:"row items-center col bg-dark divlcient"},[r("div",{staticClass:"q-pa-sm col text-center"},[r("div",{staticClass:"text--2"},[t._v("Destino:")]),r("div",{staticClass:"text-uppercase"},[t._v(t._s(t.setupToolbar.destiny))])]),r("div",{staticClass:"q-pa-sm col text-center"},[r("div",{staticClass:"text--2"},[t._v("Folio:")]),r("div",{staticClass:"text-bold"},[t._v(t._s(t.setupToolbar.verify))])])])],1),r("div",{staticClass:"row items-center justify-between q-mt-sm"},[r("div",{staticClass:"row text-center"},[r("div",{staticClass:"q-px-md"},[r("div",{staticClass:"text--2"},[t._v("Modelos")]),r("span",{staticClass:"text-green-13 text-bold"},[t._v("\n            "+t._s(t.bucketToolbar.length)+"\n          ")])]),r("div",{staticClass:"q-px-md"},[r("div",{staticClass:"text--2"},[t._v("Unidades")]),r("span",{staticClass:"text-green-13 text-bold"},[t._v(t._s(t.unityBucket))])]),r("div",{staticClass:"q-px-md"},[r("div",{staticClass:"text--2"},[t._v("Cajas")]),r("span",{staticClass:"text-green-13 text-bold"},[t._v(t._s(t.boxesBucket))])])])])]),r("div",{staticClass:"q-mb-xl"},[r("q-list",{staticClass:"rounded-borders",attrs:{bordered:""}},[r("q-expansion-item",{attrs:{"expand-separator":"","header-class":"bg-indigo-5",icon:"content_paste",label:"Productos Solicitados: "+t.b_prodToCheckOut.length,caption:"Costo Total $ "+t.bucketCostInput,dark:""}},[r("div",[r("q-scroll-area",{staticClass:"fill-window",attrs:{"thumb-style":t.thumbStyle.input,"bar-style":t.barStyle.input}},[r("transition-group",{attrs:{appear:"","enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut"}},t._l(t.b_prodToCheckOut,(function(e){return r("div",{key:e.id,staticClass:"q-py-md q-px-sm wrapper_prod",on:{click:function(s){return t.confirm(e)}}},[r("div",{staticClass:"row items-center"},[r("div",{staticClass:"q-pr-sm"},[r("q-img",{attrs:{src:s("d3b1"),width:"50px"}})],1),r("div",{staticClass:"col q-pr-sm"},[r("div",[r("span",[t._v(t._s(e.code))]),t._v(" --\n                      "),r("span",[t._v(t._s(e.name))])]),r("div",{staticClass:"text--2 text-grey-5"},[t._v(t._s(e.description))]),r("div",{staticClass:"text--2 text-amber-13"},[t._v(t._s(e.ordered.comments))])]),r("div",{staticClass:"text-right text-green-13"},[t._v("$ "+t._s(e.cost))])])])})),0)],1)],1)]),r("q-expansion-item",{attrs:{"expand-separator":"","header-class":"bg-teal-10",icon:"content_paste_go",label:"Contados: "+t.b_delivered.length,caption:"Costo Total $ "+t.bucketCostDelivered,dark:"","expand-icon-class":"text-white"}},[r("div",[r("q-scroll-area",{staticStyle:{height:"50vh","max-width":"100%"},attrs:{"thumb-style":t.thumbStyle.delivered,"bar-style":t.barStyle.delivered}},[r("transition-group",{attrs:{appear:"","enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut"}},t._l(t.b_delivered,(function(e){return r("div",{key:e.id,staticClass:"q-py-md q-px-sm wrapper_prod",on:{click:function(s){return t.edit(e)}}},[t._v("\n                docker\n                "),r("div",{staticClass:"row items-center"},[r("div",{staticClass:"q-pr-sm"},[r("q-img",{attrs:{src:s("d3b1"),width:"50px"}})],1),r("div",{staticClass:"col q-pr-sm"},[r("div",[r("span",[t._v(t._s(e.code))]),t._v(" --\n                      "),r("span",[t._v(t._s(e.name))])]),r("div",{staticClass:"text--2 text-grey-5"},[t._v(t._s(e.description))]),r("div",{staticClass:"text--2 text-amber-13"},[t._v(t._s(e.ordered.comments))]),r("div",{staticClass:"col text--2"},[t._v("\n                      "+t._s(e.metsupply.name)+" "+t._s(e.ordered.amount)+t._s(1!=e.metsupply.id?" ("+e.units+" pzs)":"")+"\n                      ")])]),r("div",{staticClass:"text-right text-green-13"},[t._v("$ "+t._s(e.total))])])])})),0)],1)],1)])],1)],1),r("q-dialog",{attrs:{position:"bottom"},model:{value:t.wndCounter.state,callback:function(e){t.$set(t.wndCounter,"state",e)},expression:"wndCounter.state"}},[t.wndCounter.product?[r("q-card",{staticClass:"bg-darkl1 text-white exo"},[r("q-card-section",{staticClass:"bg-blue-grey-9 text-white text-overline"},[t._v("CONFIRMAR PRODUCTO")]),r("q-separator"),r("ProductAOE",{attrs:{product:t.wndCounter.product,client:{},blockunitsupply:""},on:{cancel:function(e){t.wndCounter.state=!t.wndCounter.state},confirm:t.confirmCheckOut,remove:function(e){t.wndCounter.state=!t.wndCounter.state}}})],1)]:t._e()],2),r("q-footer",{staticClass:"bg-darkl1 text-white"},[t.finish.state?r("div",[r("q-btn-group",{attrs:{spread:""}},[r("q-btn",{staticClass:"q-py-md",attrs:{label:"Enviar a Caja",icon:"done",color:"positive"}}),r("q-btn",{attrs:{label:"Cancelar",icon:"cancel",color:"amber-14"}})],1)],1):r("div",{staticClass:"q-pa-xs row items-center"},[r("div",{staticClass:"col text-center"},[r("q-input",{ref:"searcher",staticClass:"text-uppercase",attrs:{filled:"",dark:"",autofocus:"",dense:"",label:"",color:"green-13",type:t.iptsearch.type},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.codeDefine.apply(null,arguments)}},scopedSlots:t._u([{key:"prepend",fn:function(){return[r("q-btn",{attrs:{dense:"",flat:"",rounded:"",icon:t.iptsearch.icon}})]},proxy:!0},{key:"append",fn:function(){return[t.definitor.length?r("q-btn",{attrs:{icon:"close",dense:"",rounded:"",flat:""}}):t._e()]},proxy:!0}]),model:{value:t.definitor,callback:function(e){t.definitor=e},expression:"definitor"}})],1),r("q-btn",{attrs:{flat:"",icon:"fas fa-plus",stack:"","no-caps":"",color:"green-13"}}),r("q-btn",{attrs:{flat:"",icon:"fas fa-arrow-right",stack:"","no-caps":"",color:"green-13"}})],1)])],1)},o=[],a=s("bd9f"),i=s("4709"),n={components:{ProductAOE:i["a"]},data(){return{finish:{state:!1},wndCounter:{state:!1,product:void 0},definitor:"",iptsearch:{processing:!1,type:"number",icon:"fas fa-font"},params:{id:"",data:Array},order:void 0,setupToolbar:{destiny:"",verify:""},stateDelete:!0,flag:!0,configToolbar:[],flagArchive:!1,rsocket:this.$sktRestock,pStrBucket:{bktInput:[],bktOutput:[],bktChekOut:[],bktCounter:0},thumbStyle:{input:{right:"4px",borderRadius:"5px",backgroundColor:"#5C6BC0",width:"5px",opacity:.75},delivered:{right:"4px",borderRadius:"5px",backgroundColor:"#004D40",width:"5px",opacity:.75}},barStyle:{input:{right:"2px",borderRadius:"9px",backgroundColor:"#5C6BC0",width:"9px",opacity:.2},delivered:{right:"2px",borderRadius:"9px",backgroundColor:"#004D40",width:"9px",opacity:.2}},metsupplies:[{name:"Piezas",id:1,alias:"pzs"},{name:"Docenas",id:2,alias:"dcs"},{name:"Cajas",id:3,alias:"cjs"}]}},async beforeMount(){this.$store.commit("Requisitions/setHeaderState",!1),this.$store.commit("Requisitions/setFooterState",!1),this.params.id=this.$route.params.id,this.$store.commit("Layout/hideToolbarModule"),this.$q.loading.show({message:"..."}),this.order=await a["a"].find(this.params.id),console.log(this.order),this.setupToolbar.destiny=this.order.from.name,this.setupToolbar.verify=this.order.id,this.pStrBucket.bktInput=this.order.products,this.pStrBucket.bktChekOut=this.getCheckOut,this.$q.loading.hide()},destroyed(){},methods:{updateCache(){let t=JSON.parse(localStorage.getItem("checkout")),e=t.findIndex((t=>this.wndCounter.product.id=t.id));t[e]=this.wndCounter.product,localStorage.setItem("checkout",JSON.stringify(t))},confirm(t){this.wndCounter.product=t,this.wndCounter.state=!0},confirmCheckOut(t){console.log(t);let e=new Object;e.amount=t.amount,e.comments=t.comments,e.cost=this.wndCounter.product.cost,e.total=this.wndCounter.product.cost*t.amount,e.units=t.units,e._supply_by=t.metsupply.id;let s=this.pStrBucket.bktChekOut.findIndex((e=>e.id==t.product.id));console.log(this.structuredBucket(t)[s].ordered),this.wndCounter.state=!1}},computed:{structuredBucket(){return t=>{let e=this.pStrBucket.bktChekOut.findIndex((e=>e.id==t.product.id));return this.pStrBucket.bktChekOut.map(((s,r)=>(r!=e||(console.log("Entro",e),s.ordered=(e=>(e.ordered.amount=t.amount,e.ordered.comments=t.comments,e.ordered.cost=e.cost,e.ordered.stock=e.ordered.stock,e.ordered.total=t.amount*e.cost,e.ordered.units=t.units,e.ordered._supply_by=t.metsupply.id,e.ordered))(s),console.log(s.ordered)),s)))}},getCheckOut(){let t=JSON.parse(localStorage.getItem("checkout"));if(t){let t=JSON.parse(localStorage.getItem("checkout")),e=t.findIndex((t=>this.wndCounter.product.id=t.id));return t[e]}return this.pStrBucket.bktInput},profile(){return this.$store.getters["Account/profile"]},workin(){return this.$store.getters["Account/workin"]},socketroom(){return`${this.workin.workpoint.alias}`},bucketToolbar(){return this.b_products.map((t=>(t.pieces=t.pieces,t.boxes=t.ordered.amount,t)))},b_products(){return this.pStrBucket.bktInput?this.pStrBucket.bktInput.map((t=>(t.ipack=t.pieces?t.pieces:1,t.metsupply=(t=>this.metsupplies.find((e=>e.id==t.ordered._supply_by)))(t),t.units=(t=>{switch(t.ordered._supply_by){case 2:return 12*t.ordered.amount;case 3:return t.ordered.amount*t.ipack;default:return t.ordered.amount}})(t),t))):[]},b_prodToCheckOut(){return this.getCheckOut?this.getCheckOut.map((t=>(t.ordered=(t=>(t.ordered.amount=0,t.ordered.comments="",t.ordered.cost=t.cost,t.ordered.stock=t.ordered.stock,t.ordered.total=0*t.cost,t.ordered.units=0,t.ordered._supply_by=t.ordered._supply_by,t.ordered))(t),t.ipack=t.pieces?t.pieces:1,t.metsupply=(t=>this.metsupplies.find((e=>e.id==t.ordered._supply_by)))(t),t.units=(t=>{switch(t.ordered._supply_by){case 2:return 12*t.ordered.amount;case 3:return t.ordered.amount*t.ipack;default:return t.ordered.amount}})(t),t))):[]},b_delivered(){return this.pStrBucket.bktInput?this.pStrBucket.bktOutput.map((t=>(t.ipack=t.pieces?t.pieces:1,t.metsupply=(t=>this.metsupplies.find((e=>e.id==t.ordered._supply_by)))(t),t.units=(t=>{switch(t.ordered._supply_by){case 2:return 12*t.ordered.amount;case 3:return t.ordered.amount*t.ipack;default:return t.ordered.amount}})(t),t))):[]},b_counter(){return this.b_delivered.map((t=>this.b_delivered++))},unityBucket(){return this.bucketToolbar.reduce(((t,e)=>t+parseInt(e.pieces*e.boxes)),0)},boxesBucket(){return this.bucketToolbar.reduce(((t,e)=>t+parseInt(e.boxes)),0)},bucketCostInput(){return this.b_products.reduce(((t,e)=>parseInt(e.cost)+t),0)},bucketCostDelivered(){return this.b_delivered.reduce(((t,e)=>parseInt(e.cost)+t),0)}}},d=n,c=(s("4224"),s("2877")),u=s("9989"),l=s("e359"),p=s("9c40"),m=s("1c1c"),b=s("3b73"),h=s("4983"),k=s("068f"),C=s("24e8"),v=s("f09f"),_=s("a370"),f=s("eb85"),x=s("7ff0"),y=s("e7a9"),g=s("27f9"),w=s("eebe"),q=s.n(w),S=Object(c["a"])(d,r,o,!1,null,"4c722b98",null);e["default"]=S.exports;q()(S,"components",{QPage:u["a"],QHeader:l["a"],QBtn:p["a"],QList:m["a"],QExpansionItem:b["a"],QScrollArea:h["a"],QImg:k["a"],QDialog:C["a"],QCard:v["a"],QCardSection:_["a"],QSeparator:f["a"],QFooter:x["a"],QBtnGroup:y["a"],QInput:g["a"]})},"3ea9":function(t,e,s){},4224:function(t,e,s){"use strict";s("3ea9")}}]);