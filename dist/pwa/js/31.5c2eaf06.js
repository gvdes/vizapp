(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[31],{a458:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6 col-xs-12 q-pa-md"},[a("q-table",{attrs:{dark:"",data:t.forsupply,columns:t.tableforsupply.columns,filter:t.tableforsupply.filtrator,pagination:t.tableforsupply.pagination,"card-class":"bg-darkl1",separator:"none"},scopedSlots:t._u([{key:"top-left",fn:function(){return[a("div",[a("q-icon",{attrs:{name:"fas fa-power-off",color:t.forsupplystate?"green-13":"grey-7",size:"1.2em"}}),t._v(" Por surtir [ "+t._s(t.forsupply.length)+" ]\n\t\t\t\t\t\t")],1)]},proxy:!0},{key:"top-right",fn:function(){return[a("q-input",{attrs:{borderless:"",dark:"",filled:"",dense:"","fill-input":"",color:"green-13",debounce:"0",placeholder:"Buscar..."},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.tableforsupply.filtrator,callback:function(e){t.$set(t.tableforsupply,"filtrator",e)},expression:"tableforsupply.filtrator"}})]},proxy:!0},{key:"no-data",fn:function(){return[a("div",{staticClass:"full-width row flex-center q-gutter-sm q-pa-md"},[a("q-icon",{attrs:{size:"2em",name:"sentiment_dissatisfied"}}),a("span",[t._v("Nada por aqui.")])],1)]},proxy:!0},{key:"body",fn:function(e){return[a("q-tr",{on:{click:function(r){return t.orderclicked(e.row)}}},[a("q-td",{key:"id"},[a("div",[t._v(t._s(e.row.id))]),a("div",{staticClass:"text--1 text-grey-5"},[t._v(t._s(t.filltkt(e.row.num_ticket)))])]),a("q-td",{key:"client"},[t._v(t._s(e.row.name))]),a("q-td",{key:"cstate",class:"st-"+e.row.status.id,attrs:{align:"center"}},[a("div",{staticClass:"text--1"},[t._v(t._s(e.row.status.name))]),a("div",{staticClass:"text--2 text-grey-5"},[t._v(t._s(t.humantime(e.row.updated_at)))])]),a("q-td",{key:"createdby",attrs:{align:"center"}},[a("div",[a("q-img",{staticClass:"imguser2",attrs:{src:r("2645"),width:"20px",height:"20px"}})],1),a("div",{staticClass:"text--1"},[t._v(t._s(e.row.created_by.nick))])])],1)]}}])})],1),a("div",{staticClass:"col-md-6 col-xs-12 q-pa-md"},[a("q-table",{attrs:{dark:"",data:t.onsupply,columns:t.tablesupply.columns,filter:t.tablesupply.filtrator,pagination:t.tablesupply.pagination,"card-class":"bg-darkl1",separator:"none"},scopedSlots:t._u([{key:"top-left",fn:function(){return[t._v("Surtiendo [ "+t._s(t.onsupply.length)+" ]")]},proxy:!0},{key:"top-right",fn:function(){return[a("q-input",{attrs:{borderless:"",dark:"",filled:"",dense:"","fill-input":"",color:"green-13",debounce:"0",placeholder:"Buscar..."},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.tablesupply.filtrator,callback:function(e){t.$set(t.tablesupply,"filtrator",e)},expression:"tablesupply.filtrator"}})]},proxy:!0},{key:"no-data",fn:function(){return[a("div",{staticClass:"full-width row flex-center q-gutter-sm q-pa-md"},[a("q-icon",{attrs:{size:"2em",name:"sentiment_dissatisfied"}}),a("span",[t._v("Nada por aqui.")])],1)]},proxy:!0},{key:"body",fn:function(e){return[a("q-tr",{on:{click:function(r){return t.orderclicked(e.row)}}},[a("q-td",{key:"id"},[a("div",[t._v(t._s(e.row.id))]),a("div",{staticClass:"text--1 text-grey-5"},[t._v(t._s(t.filltkt(e.row.num_ticket)))])]),a("q-td",{key:"client"},[t._v(t._s(e.row.name))]),a("q-td",{key:"cstate",class:"st-"+e.row.status.id,attrs:{align:"center"}},[a("div",{staticClass:"text--1"},[t._v(t._s(e.row.status.name))]),a("div",{staticClass:"text--2 text-grey-5"},[t._v(t._s(t.humantime(e.row.updated_at)))])]),a("q-td",{key:"createdby",attrs:{align:"center"}},[a("div",[a("q-img",{staticClass:"imguser2",attrs:{src:r("2645"),width:"20px",height:"20px"}})],1),a("div",{staticClass:"text--1"},[t._v(t._s(e.row.created_by.nick))])])],1)]}}])})],1)]),a("q-dialog",{attrs:{position:"bottom"},model:{value:t.wndPrinters.state,callback:function(e){t.$set(t.wndPrinters,"state",e)},expression:"wndPrinters.state"}},[a("q-card",{staticClass:"bg-darkl1 text-white exo",attrs:{flat:""}},[a("q-card-section",{staticClass:"text-overline bg-blue-grey-9 "},[t._v("Seleccione Impresora")]),a("PrinterSelect",{on:{input:t.reprint}})],1)],1)],1)},s=[],n=r("5542"),i=r("bd4c"),o=r("6d5d"),l=r("3a84"),d={name:"PreventaWarehouse",components:{OrdersList:o["a"],PrinterSelect:l["a"]},data(){return{wndPrinters:{state:!1},orderselected:null,printerselected:null,socket:this.$sktPreventa,tableforsupply:{filtrator:"",columns:[{name:"id",field:"id",sortable:!0,label:"Folio",align:"center"},{name:"client",field:"name",sortable:!0,label:"Cliente",align:"center"},{name:"cstate",field:t=>t.status.id,sortable:!0,label:"Estado",align:"center"},{name:"createdby",field:t=>t.created_by.nick,sortable:!0,label:"Agente",align:"center"}],pagination:{rowsPerPage:20}},tablesupply:{filtrator:"",columns:[{name:"id",field:"id",sortable:!0,label:"Folio",align:"center"},{name:"client",field:"name",sortable:!0,label:"Cliente",align:"center"},{name:"cstate",field:t=>t.status.id,sortable:!0,label:"Estado",align:"center"},{name:"createdby",field:t=>t.created_by.nick,sortable:!0,label:"Agente",align:"center"}],pagination:{rowsPerPage:20}}}},beforeMount(){this.$store.commit("Preventa/setHeaderTitle","Preventa | Surtido")},methods:{orderclicked(t){this.orderselected=t,this.wndPrinters.state=!0},async reprint(t){console.log(t),this.printerselected=t,this.$q.loading.show({message:"Reimprimiendo..."});let e={_order:this.orderselected.id,_printer:t.id},r=await n["a"].reprint(e);r.err?this.$q.notify({message:r.err,color:"negative",icon:"fas fa-exclamation-triangle"}):(this.$q.loading.hide(),this.wndPrinters.state=!1,this.$q.notify({message:"Impresion correcta.",color:"positive",icon:"done"}))}},computed:{forsupplystate(){return this.$store.getters["Preventa/keepProcess"](4)},filltkt(){return t=>{let e=4,r=t.toString().length,a="";for(e;r<e;e--)a+="0";return`${a}${t}`}},orders(){return this.$store.getters["Preventa/OrdersWarehouse"]},forsupply(){return this.orders.filter((t=>4==t.status.id))},onsupply(){return this.orders.filter((t=>5==t.status.id))},profile(){return this.$store.getters["Account/profile"]},workin(){return this.$store.getters["Account/workin"]},printers(){return this.$store.getters["Preventa/printersWarehouse"]},humantime(){return t=>{let e=Date.now(),r=Date.parse(t),a=i["b"].getDateDiff(e,r,"days");switch(a){case 0:return i["b"].formatDate(r,"hh:mm a");case 1:return"Ayer, "+i["b"].formatDate(r,"hh:mm a");default:return`Hace ${a} dias, `+i["b"].formatDate(r,"hh:mm a")}}},appsounds(){return this.$store.getters["Multimediapp/sounds"]}}},c=d,u=r("2877"),p=r("9989"),f=r("eaac"),m=r("0016"),g=r("27f9"),y=r("bd08"),b=r("db86"),h=r("068f"),v=r("24e8"),k=r("f09f"),_=r("a370"),w=r("eebe"),q=r.n(w),x=Object(u["a"])(c,a,s,!1,null,null,null);e["default"]=x.exports;q()(x,"components",{QPage:p["a"],QTable:f["a"],QIcon:m["a"],QInput:g["a"],QTr:y["a"],QTd:b["a"],QImg:h["a"],QDialog:v["a"],QCard:k["a"],QCardSection:_["a"]})}}]);