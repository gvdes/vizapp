(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[20],{"649c":function(t,e,a){},a714:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("q-page",{attrs:{padding:""}},[e("q-header",{staticClass:"bg-darkl0 text-grey-5 q-pa-sm"},[e("q-card",{staticClass:"bg-darkl1"},[e("toolbar-account",{attrs:{title:"Reportes"}})],1)],1),t.stats?e("div",{staticClass:"row q-pl-sm"},t._l(t.reports,(function(a,s){return e("div",{key:s,staticClass:"col-md-3 col-xs-6 q-pb-sm q-pr-sm",on:{click:function(e){return t.genReport(a)}}},[e("q-card",{staticClass:"bg-darkl1",attrs:{flat:""}},[e("q-card-section",{class:a.clases},[e("span",[t._v(t._s(a.value))])]),e("div",{staticClass:"text--1 text-right q-pa-xs text-white"},[t._v(t._s(a.description))])],1)],1)})),0):e("div",{staticClass:"q-py-xl text-center text-green-13"},[t._v("\n\t\t\tCalculando, porfavor espera...\n\t\t")]),e("div",{staticClass:"q-pt-md"},[e("ProductSales")],1)],1)},l=[],o=(a("ddb0"),a("2b3d"),a("9861"),a("1d6c")),n=a("5ed6"),r=function(){var t=this,e=t._self._c;return t.loadingSales?e("div",{staticClass:"q-pa-md text-center text-green-13"},[t._v("\n  Cargando datos ...\n")]):e("div",{staticClass:"q-mt-md"},[e("q-separator",{attrs:{dark:""}}),e("div",{staticClass:"row items-start justify-between q-pt-md"},[e("div",{staticClass:"text-h6"},[t._v("Ventas")]),e("div",{staticClass:"row"},[e("q-btn",{attrs:{flat:"",color:"green-13",icon:"sync"}}),e("q-select",{attrs:{dense:"",dark:"",options:t.optRanges,label:"Vista",filled:""},model:{value:t.range,callback:function(e){t.range=e},expression:"range"}})],1)]),e("div",{staticClass:"row q-pa-md q-gutter-md justify-center"},[e("q-card",{staticClass:"bg-darkl1"},[e("q-table",{staticClass:"transparent",attrs:{dark:"",flat:"","row-key":"id",data:t.sales,columns:t.table1.columns,pagination:t.table1.pagination,"visible-columns":t.table1.viewcols,filter:t.table1.filter},scopedSlots:t._u([{key:"top",fn:function(){return[e("div",{staticClass:"full-width row items-center"},[e("div",{staticClass:"col text-grey-5"},[t._v("ARTICULOS CON VENTAS ("+t._s(t.sales.length)+")")]),e("div",{staticClass:"row"},[e("q-btn",{attrs:{flat:"",icon:"fas fa-file-excel",color:"green-13",rounded:""}}),e("q-input",{attrs:{rounded:"",dark:"",color:"green-13",dense:"",type:"text",label:"Buscar"},model:{value:t.table1.filter,callback:function(e){t.$set(t.table1,"filter",e)},expression:"table1.filter"}})],1)])]},proxy:!0}])})],1),e("q-card",{staticClass:"bg-darkl1"},[e("q-table",{staticClass:"transparent",attrs:{dark:"",flat:"","row-key":"id",data:t.nosales,columns:t.table1.columns,pagination:t.table1.pagination,"visible-columns":t.table1.viewcols,filter:t.table1.filter},scopedSlots:t._u([{key:"top",fn:function(){return[e("div",{staticClass:"full-width row items-center"},[e("div",{staticClass:"col text-grey-5"},[t._v("ARTICULOS SIN VENTAS ("+t._s(t.nosales.length)+")")]),e("div",{staticClass:"row"},[e("q-btn",{attrs:{flat:"",icon:"fas fa-file-excel",color:"green-13",rounded:""}}),e("q-input",{attrs:{rounded:"",dark:"",color:"green-13",dense:"",type:"text",label:"Buscar"},model:{value:t.table1.filter,callback:function(e){t.$set(t.table1,"filter",e)},expression:"table1.filter"}})],1)])]},proxy:!0}])})],1)],1)],1)},i=[],c=a("31b8"),d={salesStore(){return c["b"].get("C/salesstore").then((t=>t)).catch((t=>t.response))}},p={data(){return{loadingSales:!0,optRanges:[{id:"day",label:"Dia"},{id:"week",label:"Semana"},{id:"month",label:"Mes"}],range:{id:"day",label:"Dia"},table1:{viewcols:["code","descript","sale","stock"],columns:[{name:"id",label:"ID",field:"id",sortable:!0,align:"center"},{name:"code",label:"Codigo",field:"code",sortable:!0,align:"center"},{name:"descript",label:"Descripcion",field:"description",align:"left"},{name:"sale",label:"Venta (pzs)",field:"VEN",sortable:!0,align:"center"},{name:"stock",label:"Stock (pzs)",field:"STO",sortable:!0,align:"center"},{name:"sect",label:"Seccion",field:"SECCION",sortable:!0},{name:"fam",label:"Familia",field:"FAMILIA",sortable:!0},{name:"cat",label:"Categoria",field:"CATEGORIA",sortable:!0}],filter:"",pagination:{sortBy:"sale",descending:!0,rowsPerPage:20}},productsdb:[]}},mounted(){console.log("Ooli"),this.getSales()},methods:{async getSales(){this.loadingSales=!0,console.log("Vamo a traer las ventas");const t=await d.salesStore();if(console.log(t),200==t.status){let e=t.data;this.loadingSales=!1,this.productsdb=e.rows}else console.error(t),alert(`Error ${t.status}: ${t.data}`)}},computed:{sales(){return this.productsdb.filter((t=>t.VEN))},nosales(){return this.productsdb.filter((t=>!t.VEN))}}},u=p,f=a("2877"),b=a("eb85"),g=a("9c40"),x=a("ddd8"),h=a("f09f"),m=a("eaac"),v=a("27f9"),C=a("eebe"),w=a.n(C),k=Object(f["a"])(u,r,i,!1,null,null,null),q=k.exports;w()(k,"components",{QSeparator:b["a"],QBtn:g["a"],QSelect:x["a"],QCard:h["a"],QTable:m["a"],QInput:v["a"]});var y={components:{ToolbarAccount:o["a"],ProductSales:q},data(){return{stats:null,clases:{1:"text-h4 text-left text-light-blue-13",2:"text-h4 text-left text-green-13",3:"text-h4 text-left text-green-13",4:"text-h4 text-left text-orange-14",5:"text-h4 text-left text-orange-14",6:"text-h4 text-left text-orange-14",7:"text-h4 text-left text-pink-14",8:"text-h4 text-left text-pink-14",9:"text-h4 text-left text-pink-14",10:"text-h4 text-left text-pink-14",11:"text-h4 text-left text-pink-14",12:"text-h4 text-left text-light-blue-13"}}},async beforeMount(){this.stats=await n["a"].index()},methods:{genReport(t){this.$vizapi.defaults.responseType="blob";let e=`${t.description} - ${this.workin.workpoint.alias}`;this.$q.loading.show({message:`Generando reporte (${e}), porfavor espera...`});let a={_type:t._excel};console.log(a),n["a"].report(a).then((t=>{console.log(t);const a=window.URL.createObjectURL(new Blob([t.data])),s=document.createElement("a");s.href=a,s.setAttribute("download",e+".xlsx"),document.body.appendChild(s),s.click(),this.$vizapi.defaults.responseType="json",this.$q.loading.hide()})).catch((t=>{console.log(t),this.$q.notify({icon:"fas fa-bug",color:"negative",message:"Vaya, algo salio mal "})}))}},computed:{reports(){return this.stats?(console.log(this.stats),this.stats.map((t=>(t.clases=this.clases[t._excel],t)))):null},profile(){return this.$store.getters["Account/profile"]},workin(){return this.$store.getters["Account/workin"]}}},S=y,_=(a("aa6c"),a("9989")),$=a("e359"),A=a("a370"),O=Object(f["a"])(S,s,l,!1,null,null,null);e["default"]=O.exports;w()(O,"components",{QPage:_["a"],QHeader:$["a"],QCard:h["a"],QCardSection:A["a"]})},aa6c:function(t,e,a){"use strict";a("649c")}}]);