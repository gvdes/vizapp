(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{"15a9":function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t._self._c;return s("q-layout",{attrs:{view:"hHh Lpr fFf"}},[s("q-page-container",{staticClass:"bg-darkl0 exo"},[s("q-page",{staticClass:"row items-center justify-center overflow-hidden"},[s("div",[s("transition",{attrs:{appear:"","enter-active-class":"animated fadeInUp delay-1s"}},[s("q-card",{key:"title",staticClass:"bg-darkl1 text-white exo"},[s("q-card-section",{staticClass:"row justify-between items-center"},[s("span",{staticClass:"text-h6"},[s("span",{staticClass:"text-pink-6"},[t._v(" Viz")]),s("span",{staticClass:"text-weight-thin"},[t._v("App")])])])],1)],1),s("transition",{attrs:{appear:"","enter-active-class":"animated fadeInUp delay-2s"}},[t.credentials.formstate?s("q-form",{staticClass:"column loginform",on:{submit:t.tryLogin}},[s("q-card",{staticClass:"q-mt-sm bg-darkl1 text-white",attrs:{flat:""}},[s("q-card-section",[s("div",{staticClass:"column"},[s("q-input",{staticClass:"ipt q-mb-xs",attrs:{dark:"",color:"green-13","label-color":"grey-7",label:"Usuario",autocapitalize:"off",autocomplete:"off"},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"account_circle",color:"grey-8"}})]},proxy:!0}],null,!1,2145116503),model:{value:t.credentials.nick,callback:function(s){t.$set(t.credentials,"nick",s)},expression:"credentials.nick"}}),s("q-input",{staticClass:"ipt q-mb-xs",attrs:{type:t.ipttypepass?"password":"text",dark:"",color:"green-13","label-color":"grey-7",label:"Contraseña",autocapitalize:"off",autocomplete:"off"},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"lock",color:"grey-8"}})]},proxy:!0},{key:"append",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:t.ipttypepass?"visibility_off":"visibility"},on:{click:function(s){t.ipttypepass=!t.ipttypepass}}})]},proxy:!0}],null,!1,4202864250),model:{value:t.credentials.pass,callback:function(s){t.$set(t.credentials,"pass",s)},expression:"credentials.pass"}})],1)]),t.credentials.nick.length>=2&&t.credentials.pass.length>=4?s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{staticClass:"q-pa-sm",attrs:{flat:"",dense:"",color:"green-13",type:"submit",label:"entrar",loading:t.credentials.logging,disable:t.credentials.logging}})],1):t._e()],1)],1):t._e()],1),t.resume.state?s("div",{staticClass:"q-mt-sm text-grey-6 loginform"},[t.resume.account.me.change_password?s("q-card",{staticClass:"bg-darkl1",attrs:{flat:""}},[s("q-card-section",[t._v("\n\t\t\t\t\t\t\t\tBienvenido "),s("span",{staticClass:"text-green-13"},[t._v(t._s(t.resume.account.me.names))]),t._v("."),s("br"),t._v("Para continuar, porfavor establece una contraseña:\n\t\t\t\t\t\t\t")]),s("q-form",{on:{submit:t.setPass}},[s("q-card-section",[s("q-input",{staticClass:"ipt q-mb-xs",attrs:{dark:"",color:"green-13","label-color":"grey-7",type:t.ipttypepass?"password":"text",autocapitalize:"off",autocomplete:"off",label:"Contraseña",hint:t.setpass.pass.length>=5?"":"Minimo 5 caracteres"},scopedSlots:t._u([{key:"append",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:t.ipttypepass?"visibility_off":"visibility"},on:{click:function(s){t.ipttypepass=!t.ipttypepass}}})]},proxy:!0}],null,!1,3673760803),model:{value:t.setpass.pass,callback:function(s){t.$set(t.setpass,"pass",s)},expression:"setpass.pass"}}),s("q-input",{staticClass:"ipt q-mb-xs",attrs:{dark:"",color:"green-13","label-color":"grey-7",type:t.ipttypepass?"password":"text",autocapitalize:"off",autocomplete:"off",label:"Confirmar Contraseña",rules:[s=>s==t.setpass.pass||"Las contraseñas no coinciden"]},model:{value:t.setpass.confirm,callback:function(s){t.$set(t.setpass,"confirm",s)},expression:"setpass.confirm"}})],1),t.trysetpass?s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{attrs:{dark:"",color:"green-13",flat:"",type:"submit",label:"continuar",loading:t.setpass.state,disabled:t.setpass.state}})],1):t._e()],1)],1):s("q-card",{staticClass:"bg-darkl1 text-center",attrs:{flat:""}},[s("q-card-section",[s("div",[t._v("Bienvenido "),s("span",{staticClass:"text-green-13"},[t._v(t._s(t.resume.account.me.names))]),t._v(", espera...")])]),s("q-card-section",[s("q-spinner-grid",{attrs:{color:"green-13",size:"md"}})],1)],1)],1):t._e()],1)]),s("q-footer",{staticClass:"bg-none"},[s("q-toolbar",{staticClass:"column justify-center text-grey-8 text-center text-caption"},[t._v("\n\t\t\t\t\tGrupo Vizcarra - 2020\n\t\t\t\t")])],1)],1)],1)},o=[],n=(e("14d9"),e("31b8")),i={trySignin(t){return console.log("%cLogueando...","font-size:2em; color:#2e86de;"),console.log(t),n["b"].post("account/auth",t)},trySetPass(t){return console.log("%cSetting Pass...","font-size:2em; color:#2e86de;"),console.log(t),n["b"].put("account/password",t)}},r={data(){return{credentials:{nick:"",pass:"",formstate:!0,logging:!1},resume:{state:!1,account:void 0,workpoints:void 0,text:""},setpass:{pass:"",confirm:"",state:!1},ipttypepass:!0,vsocket:this.$vSocket}},methods:{tryLogin(){let t={nick:this.credentials.nick,password:this.credentials.pass};this.credentials.logging=!0,i.trySignin(t).then((t=>{let s=t.data;console.log(s),s.account?(this.credentials.formstate=!1,this.resume.state=!0,this.resume.account=s.account,this.resume.workpoints=s.workpoints,this.$vizapi.defaults.headers.common["Authorization"]="Bearer "+s.account.token,s.account.me.change_password?(this.ipttypepass=!0,console.log("%cCambiar el pasword","font-size:2em;")):this.setSession()):(this.credentials.logging=!1,this.$q.notify({color:"red-13",message:s.message,icon:"announcement",timeout:800}))})).catch((t=>{console.log(t),this.credentials.logging=!1,this.$q.notify({color:"negative",message:"¡¡Raios!! el servidor no responde!",icon:"announcement"})}))},setPass(){this.setpass.state=!0,console.log("Seteando password"),console.log(this.$vizapi.defaults.headers.common["Authorization"]);let t={password:this.credentials.pass,new_password:this.setpass.confirm};i.trySetPass(t).then((t=>{let s=t.data;s.success?(this.resume.text="Iniciando...",this.resume.account.change_password=!1,this.setSession()):(this.setpass.state=!1,this.$q.notify({color:"red-13",message:s.message,icon:"announcement",timeout:800}))})).catch((t=>{console.log(t)}))},setSession(){console.log("%cSeteando Sesion","font-size:2em;");let t={account:this.resume.account,workpoints:this.resume.workpoints,stock:!0};this.$store.commit("Account/setsession",t),this.vsocket.connect(),this.vsocket.on("socketid",(t=>{this.vsocket.emit("session_start",{profile:this.profile,socketid:t.socketid,from:this.workin}),console.log("%cUnido al Canal Global (by LogIn)","background:#1B9CFC;color:white;border-radius:10px;padding:6px;")})),this.$router.push("/lanzador")}},computed:{trysetpass(){return this.setpass.pass.length>4&&this.setpass.pass==this.setpass.confirm},workin(){return this.$store.getters["Account/workin"]},profile(){return this.$store.getters["Account/profile"]}}},c=r,l=(e("aa8e"),e("2877")),p=e("4d5a"),d=e("09e3"),u=e("9989"),m=e("f09f"),g=e("a370"),f=e("0378"),h=e("27f9"),y=e("0016"),b=e("4b7e"),k=e("9c40"),v=e("981c"),q=e("7ff0"),w=e("65c6"),C=e("eebe"),x=e.n(C),_=Object(l["a"])(c,a,o,!1,null,null,null);s["default"]=_.exports;x()(_,"components",{QLayout:p["a"],QPageContainer:d["a"],QPage:u["a"],QCard:m["a"],QCardSection:g["a"],QForm:f["a"],QInput:h["a"],QIcon:y["a"],QCardActions:b["a"],QBtn:k["a"],QSpinnerGrid:v["a"],QFooter:q["a"],QToolbar:w["a"]})},aa8e:function(t,s,e){"use strict";e("c81c")},c81c:function(t,s,e){}}]);