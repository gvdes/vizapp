(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[14],{"028d":function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",{attrs:{padding:""}},[s("q-header",{staticClass:"bg-darkl0 text-grey-5 q-pa-sm"},[s("q-card",{staticClass:"bg-darkl1"},[s("toolbar-account",{attrs:{title:"Min/Max"}})],1)],1),s("q-card",{staticClass:"bg-darkl1",attrs:{flat:""}},[s("q-toolbar",[t._v("Ajuste")]),s("q-separator"),s("q-card-section",[s("q-select",{ref:"iptsearch",staticClass:"text-uppercase",attrs:{dark:"",dense:"",filled:"","fill-input":"",color:"green-13",behavior:"menu","use-input":"","hide-selected":"","hide-dropdown-icon":"","input-debounce":"0","option-value":"id","option-label":"code",value:t.autocom.model,options:t.autocom.options,type:t.iptsearch.type},on:{filter:t.autocomplete,input:t.get},scopedSlots:t._u([{key:"no-option",fn:function(){return[s("q-item",[s("q-item-section",{staticClass:"text-grey"},[t._v("Sin coincidencias")])],1)]},proxy:!0},{key:"prepend",fn:function(){return[s("q-btn",{attrs:{type:"button",dense:"",size:"sm",flat:"",icon:t.iptsearch.icon,color:"grey-6"},on:{click:t.toogleIptSearch}})]},proxy:!0},{key:"option",fn:function(e){return[s("q-item",t._g(t._b({},"q-item",e.itemProps,!1),e.itemEvents),[s("q-item-section",{attrs:{avatar:""}}),s("q-item-section",[s("q-item-label",[s("span",{staticClass:"text-bold"},[t._v(t._s(e.opt.code))]),t._v(" - "+t._s(e.opt.name))]),s("q-item-label",{staticClass:"text--2",attrs:{caption:""}},[t._v(t._s(e.opt.description))])],1)],1)]}}])})],1),t.setproduct.state?s("q-card-section",[s("div",{staticClass:" row no-wrap q-gutter-sm"},[s("div",{},[s("q-img",{staticStyle:{overflow:"hidden",width:"120px",height:"120px","border-radius":"10px"},attrs:{src:"http://192.168.1.86:6011/products/"+t.setproduct.code+".jpg"}})],1),s("div",{},[s("div",{staticClass:"text-h6"},[t._v(t._s(t.setproduct.code))]),s("div",[t._v(t._s(t.setproduct.description))]),s("div",[s("q-select",{attrs:{dense:"",dark:"",color:"green-13",disable:t.prodstate.block,loading:t.prodstate.block,options:t.labelstates,label:"Estatus"},on:{input:t.updateState},model:{value:t.prodstate.val,callback:function(e){t.$set(t.prodstate,"val",e)},expression:"prodstate.val"}})],1)])]),t.getting?s("div",{staticClass:"q-pt-md text-center text-green-13"},[s("q-spinner"),t._v(" Cargando datos...")],1):s("q-form",{staticClass:"q-pt-md"},[s("div",{staticClass:"row q-gutter-lg"},[s("div",{staticClass:"col text-center"},[s("div",{staticClass:"text--1"},[t._v("Piezas x Caja")]),s("div",{staticClass:"text-light-blue-13 text-h5"},[t._v(t._s(t.setproduct.ipack))])]),s("div",{staticClass:"col text-center"},[s("div",{staticClass:"text--1"},[t._v("Stock")]),s("div",{staticClass:"text-h5",class:t.setproduct.stock>=1?"text-green-13":"text-negative"},[t._v(t._s(t.setproduct.stock))])]),t._l(t.setproduct.stock_stores,(function(e,o){return s("div",{key:o,staticClass:"col text-center"},[s("div",{staticClass:"text--1"},[t._v(t._s(e.alias))]),s("div",{staticClass:"text-h5",class:e.stock>=1?"text-green-13":"text-negative"},[t._v(t._s(e.stocks))])])}))],2),s("q-separator"),s("div",{staticClass:"row q-gutter-lg"},[s("q-input",{staticClass:"col",attrs:{dark:"",color:"green-13",type:"number",label:"Minimo",min:"0",autofocus:""},model:{value:t.setproduct.min,callback:function(e){t.$set(t.setproduct,"min",e)},expression:"setproduct.min"}}),s("q-input",{staticClass:"col",attrs:{dark:"",color:"green-13",type:"number",label:"Maximo",min:"0"},model:{value:t.setproduct.max,callback:function(e){t.$set(t.setproduct,"max",e)},expression:"setproduct.max"}}),t.canset?s("q-btn",{staticClass:"bg-darkl1 shadow-1",attrs:{rounded:"",flat:"",color:"green-13",icon:"done",loading:t.setproduct.setting},on:{click:t.set}}):t._e()],1)],1)],1):t._e()],1)],1)},a=[],i=(s("e01a"),s("e6cf"),s("498a"),s("5ed6")),c=s("f7cb"),r=s("1d6c"),n={components:{ToolbarAccount:r["a"]},data(){return{iptsearch:{value:"",processing:!1,type:"text",icon:"fas fa-hashtag"},autocom:{model:null,options:void 0},setproduct:{id:null,state:!1,setting:!1,code:void 0,min:0,max:0,currmin:0,currmax:0,ipack:void 0,stock:void 0,description:void 0,stock_stores:void 0},getting:!1,dbLabelStates:null,prodstate:{val:null,state:!1,block:!1}}},async beforeMount(){console.log("%cMontando minimos y maximos","font-size:1.5em; color:gold;"),this.dbLabelStates=await c["a"].labelStates(),console.log(this.dbLabelStates)},methods:{noload(){console.log("imagen no cargo")},autocomplete(t,e,s){let o={params:{code:t.trim()}};c["a"].autocomplete(o).then((t=>{let s=t.data;e((()=>{this.autocom.options=s}))})).catch((t=>{console.log(t)}))},toogleIptSearch(){switch(this.iptsearch.type){case"text":this.iptsearch.type="number",this.iptsearch.icon="fas fa-font";break;case"number":this.iptsearch.type="text",this.iptsearch.icon="fas fa-hashtag";break}this.$refs.iptsearch.focus()},updateState(){this.prodstate.block=!0;let t={_product:this.setproduct.id,_status:this.prodstate.val.value};c["a"].updateState(t).then((t=>{let e=t.data;console.log(e),this.prodstate.block=!1,this.$q.notify({message:`<b>${this.setproduct.code}</b> actualizado a <b>${this.prodstate.val.label}</b>`,timeout:2e3,color:"positive",position:"center",icon:"done",html:!0})})).catch((t=>{console.log(t)}))},get(t){this.setproduct={id:null,state:!1,setting:!1,code:void 0,min:0,max:0,currmin:0,currmax:0,ipack:void 0,stock:void 0,description:void 0,stock_stores:void 0},this.getting=!0,console.log(t),this.setproduct.state=!1,this.iptsearch.processing=!0;let e=t.id,s={params:{id:e,stocks:!0}};this.setproduct.code=t.code,this.setproduct.description=t.description,this.setproduct.state=!0,i["a"].product(s).then((t=>{console.log(t);let e=t.data;this.getting=!1,this.prodstate.val={value:e.status.id,label:e.status.name},this.setproduct.id=e.id,this.setproduct.stock_stores=e.stocks_stores,this.setproduct.stock=e.stock,this.setproduct.ipack=e.pieces,this.setproduct.min=e.min,this.setproduct.max=e.max,this.setproduct.currmin=e.min,this.setproduct.currmax=e.max,this.iptsearch.processing=!1})).catch((t=>{this.$q.notify({message:"Raios!!, esto no ha funcionado!!",timeout:3e3,color:"deep-orange-14",position:"center",icon:"fas fa-exclamation-triangle"})}))},set(){let t={code:this.setproduct.code,min:parseInt(this.setproduct.min),max:parseInt(this.setproduct.max)};i["a"].setminmax(t).then((t=>{let e=t.data.success;e?(this.setproduct.currmin=this.setproduct.min,this.setproduct.currmax=this.setproduct.max,this.$q.notify({timeout:1500,color:"positive",position:"center",icon:"done"}),this.$refs.iptsearch.focus()):this.$q.notify({timeout:1500,color:"negative",position:"center",icon:"fas fa-heart-broken"})})).catch((t=>{console.log(t)}))}},computed:{cansearch(){return!(this.iptsearch.value.length>2)},canset(){return this.setproduct.min!=this.setproduct.currmin||this.setproduct.max!=this.setproduct.currmax},ismobile(){return this.$q.platform.is.mobile},imgcover(){return t=>"http://192.168.1.86:6011/products/"+setproduct.code+".jpg"},labelstates(){return this.dbLabelStates?this.dbLabelStates.map((t=>({value:t.id,label:t.name}))):[]}}},l=n,d=s("2877"),p=s("9989"),u=s("e359"),m=s("f09f"),h=s("65c6"),g=s("eb85"),b=s("a370"),v=s("ddd8"),f=s("66e5"),x=s("4074"),k=s("9c40"),q=s("068f"),_=s("0170"),C=s("0d59"),S=s("0378"),y=s("27f9"),w=s("eebe"),Q=s.n(w),$=Object(d["a"])(l,o,a,!1,null,null,null);e["default"]=$.exports;Q()($,"components",{QPage:p["a"],QHeader:u["a"],QCard:m["a"],QToolbar:h["a"],QSeparator:g["a"],QCardSection:b["a"],QSelect:v["a"],QItem:f["a"],QItemSection:x["a"],QBtn:k["a"],QImg:q["a"],QItemLabel:_["a"],QSpinner:C["a"],QForm:S["a"],QInput:y["a"]})},"1d6c":function(t,e,s){"use strict";var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-toolbar",{staticClass:"row justify-between items-center"},[s("span",[t.iconlauncher?s("q-btn",{attrs:{dense:"",rounded:"",flat:"",icon:"fab fa-atlassian fa-rotate-180"},on:{click:function(e){return t.$router.push("/")}}}):s("q-icon",{attrs:{name:"fab fa-atlassian fa-rotate-180",size:"25px"}})],1),s("span",{staticClass:"col text-center"},[s("span",[t._v(t._s(t.workin.workpoint.alias))]),s("br"),s("span",[t._v(t._s(t.title))])]),s("span",{staticClass:"text-right"},[s("q-btn",{attrs:{rounded:"",dense:"",color:t.sockstate?"green-13":""}},[s("q-img",{staticStyle:{height:"30px",width:"30px"},attrs:{src:t.picnick,"spinner-color":"white"}}),s("q-menu",{attrs:{"transition-show":"flip-right","transition-hide":"flip-left"}},[s("q-list",{staticClass:"text-grey-8 exo",staticStyle:{"min-width":"150px"}},[s("q-item",[s("q-item-section",[t._v("Hola "+t._s(t.session.me.nick))])],1),s("q-separator"),s("q-item",{attrs:{clickable:""},on:{click:t.sessionDestroy}},[s("q-item-section",[t._v("Salir")])],1)],1)],1)],1)],1)])},a=[],i={name:"ToolbarAccount",props:{title:{type:String,required:!0},iconlauncher:{type:Boolean,default:!0},sockstate:{type:Boolean,default:!1}},methods:{sessionDestroy(){this.$store.commit("Account/unsetsession"),this.$router.push("/acceso")}},computed:{session:{get(){return this.$store.state.Account.profile}},workin:{get(){return this.$store.state.Account.workin}},workpoints:{get(){return this.$store.state.Account.workpoints}},picnick(){return this.session.me.pictures?this.session.me.pictures:"https://www.iconfinder.com/data/icons/avatars-15/64/_Ninja-2-512.png"}}},c=i,r=s("2877"),n=s("65c6"),l=s("9c40"),d=s("0016"),p=s("068f"),u=s("4e73"),m=s("1c1c"),h=s("66e5"),g=s("4074"),b=s("eb85"),v=s("eebe"),f=s.n(v),x=Object(r["a"])(c,o,a,!1,null,null,null);e["a"]=x.exports;f()(x,"components",{QToolbar:n["a"],QBtn:l["a"],QIcon:d["a"],QImg:p["a"],QMenu:u["a"],QList:m["a"],QItem:h["a"],QItemSection:g["a"],QSeparator:b["a"]})},"5ed6":function(t,e,s){"use strict";var o=s("31b8");e["a"]={index(){return o["b"].get("/location/index").then((t=>t.data)).catch((t=>{console.log(t)}))},tree(t){return o["b"].get("/location/allSections",t)},warehouses(t){return o["b"].get("/location/cellers")},loadWarehouses(){return console.log("%cCargando Almacenes...","font-size:2em; color:purple;"),o["b"].get("/location/cellers").then((t=>(console.log(t),t.data.cellers))).catch((t=>{console.log(t)}))},loadSections(t){return console.log("Traiendo secciones"),o["b"].get("/location/sections",t)},product(t){return console.log(t),o["b"].get("/location/product",t)},toggle(t){return o["b"].post("/location/toggle",t)},create(t){return o["b"].post("/location/celler",t)},addSection(t){return console.log(t),o["b"].post("/location/section",t)},setminmax(t){return console.log(t),o["b"].post("/location/maximos",t)},existencesIndex(t){return console.log("Cargando index del modulo EXISTENCIAS.."),o["b"].post("/product/catalog",t).then((t=>t.data)).catch((t=>{console.log("===========ERROR==========="),console.log(t)}))},loadCats(t){return o["b"].post("/product/catalog",t)},getStocks(t){return o["b"].post("/location/stocks",t)},getFiltred(t){return console.log(t),o["b"].post("/product/catalog",t)}}},f7cb:function(t,e,s){"use strict";var o=s("31b8");e["a"]={autocomplete(t){return o["b"].get("/product/autocomplete",t)},labelStates(){return o["b"].get("/product/getStatus").then((t=>t.data.status)).catch((t=>{console.log(t)}))},updateState(t){return o["b"].post("/product/updateStatus",t)}}}}]);