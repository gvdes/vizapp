(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[16],{"1d6c":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-toolbar",{staticClass:"row justify-between items-center"},[a("span",[t.iconlauncher?a("q-btn",{attrs:{dense:"",rounded:"",flat:"",icon:"fab fa-atlassian fa-rotate-180"},on:{click:function(e){return t.$router.push("/")}}}):a("q-icon",{attrs:{name:"fab fa-atlassian fa-rotate-180",size:"25px"}})],1),a("span",{staticClass:"col text-center"},[a("span",[t._v(t._s(t.workin.workpoint.alias))]),a("br"),a("span",[t._v(t._s(t.title))])]),a("span",{staticClass:"text-right"},[a("q-btn",{attrs:{rounded:"",dense:"",color:t.sockstate?"green-13":""}},[a("q-img",{staticStyle:{height:"30px",width:"30px"},attrs:{src:t.picnick,"spinner-color":"white"}}),a("q-menu",{attrs:{"transition-show":"flip-right","transition-hide":"flip-left"}},[a("q-list",{staticClass:"text-grey-8 exo",staticStyle:{"min-width":"150px"}},[a("q-item",[a("q-item-section",[t._v("Hola "+t._s(t.session.me.nick))])],1),a("q-separator"),a("q-item",{attrs:{clickable:""},on:{click:t.sessionDestroy}},[a("q-item-section",[t._v("Salir")])],1)],1)],1)],1)],1)])},o=[],n={name:"ToolbarAccount",props:{title:{type:String,required:!0},iconlauncher:{type:Boolean,default:!0},sockstate:{type:Boolean,default:!1}},methods:{sessionDestroy(){this.$store.commit("Account/unsetsession"),this.$router.push("/acceso")}},computed:{session:{get(){return this.$store.state.Account.profile}},workin:{get(){return this.$store.state.Account.workin}},workpoints:{get(){return this.$store.state.Account.workpoints}},picnick(){return this.session.me.pictures?this.session.me.pictures:"https://www.iconfinder.com/data/icons/avatars-15/64/_Ninja-2-512.png"}}},r=n,i=a("2877"),l=a("65c6"),c=a("9c40"),d=a("0016"),m=a("068f"),p=a("4e73"),u=a("1c1c"),h=a("66e5"),f=a("4074"),b=a("eb85"),g=a("eebe"),Y=a.n(g),v=Object(i["a"])(r,s,o,!1,null,null,null);e["a"]=v.exports;Y()(v,"components",{QToolbar:l["a"],QBtn:c["a"],QIcon:d["a"],QImg:m["a"],QMenu:p["a"],QList:u["a"],QItem:h["a"],QItemSection:f["a"],QSeparator:b["a"]})},"2b4c":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{attrs:{padding:""}},[a("q-header",{staticClass:"bg-darkl0 text-grey-5 q-pa-sm"},[a("q-card",{staticClass:"bg-darkl1"},[a("toolbar-account",{attrs:{title:"Ventas"}})],1)],1),a("global-sale",{attrs:{branches:t.branches,range:t.ranges,loadingBalance:t.loadingBalance},on:{settingRanges:t.setted}})],1)},o=[],n=(a("e6cf"),a("1d6c")),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bg-darkl1"},[a("q-card",{staticClass:"bg-none"},[a("div",{staticClass:"row q-pa-md"},[a("div",{staticClass:"col text-h6"},[t._v("Ventas")]),a("div",[a("div",{staticClass:"row justify-end items-cente"},[a("q-select",{staticClass:"col",staticStyle:{"max-width":"130px"},attrs:{dark:"",color:"green-13",label:"Vista",options:t.range},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),"p"==t.date.value?a("div",{staticClass:"column"},[a("q-btn",{staticClass:"bg-none",attrs:{icon:"event",dark:"",flat:"",rounded:"",label:"del "+t.date_from}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{color:"grey-10",mask:"YYYY-MM-DD","first-day-of-week":"1",options:t.fromOptions,"navigation-min-year-month":"2020/01","navigation-max-year-month":"2020/12"},model:{value:t.date_from,callback:function(e){t.date_from=e},expression:"date_from"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Ok",flat:""}})],1)])],1)],1),a("q-btn",{staticClass:"bg-none",attrs:{icon:"event",dark:"",flat:"",rounded:"",label:"al "+t.date_to}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"},on:{hide:t.emmitDays}},[a("q-date",{attrs:{color:"grey-10",mask:"YYYY-MM-DD","first-day-of-week":"1",options:t.toOptions},model:{value:t.date_to,callback:function(e){t.date_to=e},expression:"date_to"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Ok",flat:""}})],1)])],1)],1)],1):t._e()],1),a("div",{staticClass:"q-pa-sm text--1 text-grey-4"},[t._v(t._s(t.viewDate))])])]),a("q-card-section",{staticClass:"text-center text-h4 text-green-13"},[t.loadingBalance?a("span",[a("q-spinner-pie",{attrs:{color:"green-13",size:"1.3em"}})],1):a("span",[t._v("$ "+t._s(t.formatted(t.totalSale)))])]),a("q-card-section",[a("apexchart",{attrs:{width:"97%",height:"500px",type:"bar",options:t.options,series:t.chartsales}})],1)],1)],1)},i=[],l=(a("13d5"),a("1321")),c=a.n(l),d={name:"GlobalSale",components:{apexchart:c.a},props:{branches:{type:Array,default:[]},range:{type:Array},loadingBalance:{type:Boolean,default:!1}},data(){return{date:{value:"t",label:"Diaria"},date_from:this.$moment().format("YYYY/MM/DD"),date_to:this.$moment().format("YYYY/MM/DD"),chartsales:[{name:"Venta",data:[1,2,3,4,5,6,7,8,9]},{name:"Tickets",data:[10,20,30,40,50,60,70,80,90]}],options:{chart:{id:"global_sale",background:"none",theme:{mode:"dark"},events:{dataPointSelection:(t,e,a)=>{this.tryOpenBranch(a.dataPointIndex)}}},stroke:{colors:["#222f3e"]},colors:["#64DD18","#33691E"],xaxis:{categories:[1991,1992,1993,1994,1995,1996,1997,1998]},plotOptions:{bar:{horizontal:!0,columnWidth:"100%",barHeight:"90%"}}}}},methods:{emmitDays(){let t={date_from:this.date_from,date_to:this.date_to};this.$emit("settingRanges",t)}},computed:{viewDate(){let t="",e=this.$moment().startOf("year").format("DD"),a=this.$moment().startOf("month").format("DD"),s=this.$moment().startOf("week").format("DD"),o=this.$moment().format("dddd"),n=this.$moment().format("DD"),r=this.$moment().format("MMMM"),i=this.$moment().format("MM"),l=this.$moment().format("YYYY");switch(this.date_to=`${l}-${i}-${n}`,this.date.value){case"t":this.date_from=`${l}-${i}-${n}`,t=`${o} ${n} de ${r}, ${l}`;break;case"w":this.date_from=this.$moment().startOf("week").format("YYYY-MM-DD"),t=`Del ${s} al ${n} de ${r}, ${l}`;break;case"m":this.date_from=this.$moment().startOf("month").format("YYYY-MM-DD"),t=`Del ${a} al ${n} de ${r}, ${l}`;break;case"y":this.date_from=this.$moment().startOf("year").format("YYYY-MM-DD"),t=`Del ${e} de Enero al ${n} de ${r}, ${l}`;break;case"p":console.log("vista personalizada");break}return"p"!=this.date.value&&this.emmitDays(),t},fromOptions(){let t=this.$moment(),e=(t.format("YYYY/MM/DD"),t.add(1,"d").format("YYYY/MM/DD")),a=t.startOf("year").format("YYYY/MM/DD");return t=>t>=a&&t<e},toOptions(){let t=this.$moment(this.date_from).format("YYYY/MM/DD"),e=(this.$moment(this.date_from).format("YYYY/MM/DD"),this.$moment().format("YYYY/MM/DD"));return a=>a>=t&&a<=e},totalSale(){return this.branches.reduce(((t,e)=>parseFloat(e.venta)+t),0)},formatted(){return t=>new Intl.NumberFormat("es-MX").format(t)},xlabels(){return["1","2","3","4","5","6","7","8","9"]}}},m=d,p=a("2877"),u=a("f09f"),h=a("ddd8"),f=a("9c40"),b=a("7cbe"),g=a("52ee"),Y=a("a370"),v=a("163c"),$=a("7f67"),D=a("eebe"),_=a.n(D),k=Object(p["a"])(m,r,i,!1,null,null,null),w=k.exports;_()(k,"components",{QCard:u["a"],QSelect:h["a"],QBtn:f["a"],QPopupProxy:b["a"],QDate:g["a"],QCardSection:Y["a"],QSpinnerPie:v["a"]}),_()(k,"directives",{ClosePopup:$["a"]});var x=a("31b8"),y={test(){console.log("cluster is working")},index(t){return x["b"].post("/ventas",t).then((t=>{let e=t.data;return e})).catch((t=>{console.log(t)}))}},M={data(){return{index:void 0,ranges:[{value:"t",label:"Diaria"},{value:"w",label:"Semanal"},{value:"m",label:"Mensual"},{value:"y",label:"Anual"},{value:"p",label:"Personalizada"}],ranges_data:void 0,loadingBalance:!1}},components:{ToolbarAccount:n["a"],GlobalSale:w},methods:{setted(t){console.log("%cEnviando rango de fechas!!","font-size:2em;color:gold;"),console.log(t),this.ranges_data=t,this.indexSales(this.ranges_data)},async indexSales(t){this.loadingBalance=!0,this.index=await y.index(t),console.log(this.index),this.loadingBalance=!1}},computed:{branches(){return this.index?this.index.sucursales:[]}}},q=M,C=a("9989"),Q=a("e359"),O=Object(p["a"])(q,s,o,!1,null,null,null);e["default"]=O.exports;_()(O,"components",{QPage:C["a"],QHeader:Q["a"],QCard:u["a"]})}}]);