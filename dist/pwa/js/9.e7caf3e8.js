(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[9],{"1d8b":function(e,o,t){"use strict";t("e715")},cc6a:function(e,o,t){"use strict";t.r(o);var s=function(){var e=this,o=e._self._c;return o("q-layout",{attrs:{view:"lHh Lpr lFf"}},[o("q-page-container",{staticClass:"exo bg-darkl0 text-white"},[e.layout.header.state?o("q-header",{staticClass:"bg-none"},[o("q-card",{staticClass:"bg-darkl1"},[o("HeaderApp",{attrs:{title:e.layout.header.title}}),e.layout.viewsection?o("div",{staticClass:"bg-darkl1 q-pa-sm row"},[o("div",{staticClass:"col-md col-xs-12"},[o("RangeDates",{on:{inputRanges:e.loadView}})],1)]):e._e()],1)],1):e._e(),o("router-view"),e.layout.footer.state?o("q-footer",{staticClass:"bg-darktransl0",attrs:{reveal:""}},[o("ToolbarModule",{attrs:{with_home:e.inc_home}})],1):e._e()],1)],1)},a=[],r=t("b0fc"),i=t("7538"),n=t("1670"),d=t("5542"),c=t("c4e4");console.log("%c Layout Preventa Loaded!!","font-size:2em; color:yellow;");var l={name:"Preventa",components:{ToolbarModule:r["a"],RangeDates:i["a"],HeaderApp:n["a"]},data(){return{psocket:this.$sktPreventa,mainsocket:this.$vSocket}},created(){this.psocket.disconnect(),this.psocket.connect(),this.psocket.on("socketid",(e=>this.sktId(e))),this.psocket.on("joinedat",(e=>this.sktJoinedAt(e))),this.psocket.on("newjoin",(e=>this.sktNewJoin(e))),this.psocket.on("order_add",(e=>this.sktOrderAdd(e))),this.psocket.on("order_update",(e=>this.sktOrderUpdate(e))),this.psocket.on("order_aou",(e=>this.sktAOU(e))),this.psocket.on("module_update",(e=>this.sktModuleUpdate(e))),this.psocket.on("cash_update",(e=>this.sktCashUpdate(e)));let e=null;switch(this.profile.me._rol){case 1:case 2:case 3:e="admins";break;case 4:e="sales";break;case 6:case 7:e="supply";break;case 9:e="checkout";break}this.psocket.emit("join",{profile:this.profile,workpoint:this.workin.workpoint,room:e}),this.psocket.emit("join",{profile:this.profile,workpoint:this.workin.workpoint,room:"cfg"})},methods:{async loadView(e){this.$q.loading.show({message:"Cargando vista..."});let o={date_from:e.dbranges.from,date_to:e.dbranges.to},t=await d["a"].index(o),s=await c["a"].get({_rol:[4]});this.$store.commit("Preventa/startState",{index:t,agents:s}),this.$q.loading.hide()},sktId(e){console.log(`%cidSktPreventa: ${e}`,"background:#273c75;color:#f5f6fa;border-radius:10px;padding:10px;font-size:1.3em;")},sktJoinedAt(e){console.log(`%cUnion a ${e.room} OK!!`,"background:#3d3d3d;color:#3ae374;border-radius:10px;padding:10px;")},sktNewJoin(e){console.log(`%c${e.profile.me.nick} se unio a ${e.room}`,"background:#3ae374;color:#3d3d3d;border-radius:10px;padding:10px;"),console.log(e)},sktOrderAdd(e){console.log(e);let o=e.order,t=e.user.me;console.log(`%c${t.nick} inicio la orden ${o.id}`,"background:#303952;color:#e66767;border-radius:10px;padding:8px;"),this.$store.commit("Preventa/newOrder",o)},sktOrderUpdate(e){console.log(e);let o=e.order,t=e.newstate;console.log(`%cLa orden ${e.order.id} cambio su status a ${e.newstate.name}`,"background:#7158e2;color:#fffa65;border-radius:10px;padding:8px;"),this.$store.commit("Preventa/updateState",{order:o,newstate:t}),"/preventa/bodega"==this.$router.currentRoute.path?(console.log("El sonido ha sonado porque estoy en la bodega"),this.appsounds.supply.play()):console.log("El sonido no sono, porque no estoy en la bodega")},sktModuleUpdate({by:e,_msgstate:o,state:t}){this.$store.commit("Preventa/setState",t),console.log(`%c--‚ùØ ${e} ${o} el modulo ${t.name}`,"background:#fbc531;color:#2f3640;border-radius:10px;padding:10px;font-size:1.3em;"),this.appsounds.alert1.play(),this.$q.notify({message:`${e} <b>${o}</b> el modulo <b>${t.name}</b>`,type:"warning",closeBtn:"Ok",timeout:1e4,position:"center",html:!0})},sktAOU(e){console.log(e),console.log(`%cAveriguando existencia de pedido ${e.order.id} para crear o actualizar!!`),this.$store.commit("Preventa/orderAOU",e)},sktCashUpdate({by:e,cash:o,newstate:t}){let s=1==t.id?"encendio":"apago";this.$store.commit("Preventa/setCashState",{cash:o,newstate:t}),this.$q.notify({message:`<b>${e}</b> ${s} la <b>${o.name}</b>`,type:"warning",closeBtn:"Ok",timeout:1e4,position:"center",html:!0})}},destroyed(){console.log("%cDesconectando de preventa...","background:#F97F51;color:#2C3A47;border-radius:10px;padding:6px;"),this.psocket.emit("unjoin",{profile:this.profile,workpoint:this.workin.workpoint,room:"admins"}),this.psocket.off("admins"),this.psocket.off("orders"),this.psocket.disconnect()},computed:{workin(){return this.$store.getters["Account/workin"]},profile(){return this.$store.getters["Account/profile"]},layout(){return this.$store.state.Preventa.layout},inc_home(){return this.profile.me._rol<=3},appsounds(){return this.$store.getters["Multimediapp/sounds"]}}},p=l,u=(t("1d8b"),t("2877")),h=t("4d5a"),k=t("09e3"),g=t("e359"),m=t("f09f"),b=t("7ff0"),f=t("eebe"),w=t.n(f),$=Object(u["a"])(p,s,a,!1,null,null,null);o["default"]=$.exports;w()($,"components",{QLayout:h["a"],QPageContainer:k["a"],QHeader:g["a"],QCard:m["a"],QFooter:b["a"]})},e715:function(e,o,t){}}]);