(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{bc9f:function(e,t,s){},debb:function(e,t,s){"use strict";s("bc9f")},fa13:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-page",{attrs:{padding:""}},[s("div",{staticClass:"text-center q-pt-md"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.iptsearch.model,expression:"iptsearch.model"}],ref:"ipt_search",class:e.socket.connected?"son":"soff",attrs:{type:"number",autocomplete:"off",id:"ipt_search",disabled:e.searching},domProps:{value:e.iptsearch.model},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search.apply(null,arguments)},input:function(t){t.target.composing||e.$set(e.iptsearch,"model",t.target.value)}}}),s("div",{staticClass:"q-pt-lg"},[s("div",{staticClass:"row items-center q-gutter-sm"},e._l(e.orders,(function(t){return s("q-card",{key:t.id,staticClass:"bg-darkl1"},[s("q-card-section",[e._v("\n\t\t\t\t\t\t"+e._s(t.name)+" ("),s("span",{staticClass:"text-bold text-white"},[e._v(e._s(t.id))]),e._v(")\n\t\t\t\t\t")])],1)})),1)])])])},o=[],i=s("6d5d"),a=s("5542"),n={components:{OrdersList:i["a"]},data(){return{socket:this.$sktPreventa,iptsearch:{model:"",focus:!1},gstate:"listen",searching:!1,target:void 0}},beforeMount(){this.$store.commit("Preventa/setHeaderTitle","Preventa | CheckIn"),this.socket.emit("join",{profile:this.profile,workpoint:this.workin.workpoint,room:"checkin"}),this.socket.on("order_changestate",(e=>this.skt_add_update_order(e))),this.$store.commit("Preventa/setHeaderState",!1)},mounted(){this.$refs.ipt_search.focus()},methods:{listenipt(e){this.iptsearch.focus=e},search(){this.searching=!0;let e=this.orders.findIndex((e=>this.iptsearch.model==e.id));-1==e?(this.$q.notify({color:"negative",message:`<b>${this.iptsearch.model}</b> No encontrado...`,timeout:2e3,position:"center",html:!0}),this.iptsearch.model="",this.$refs.ipt_search.focus(),this.searching=!1):(this.target=this.orders[e],this.nextStep())},async nextStep(){let e=await a["a"].nextStep({_order:this.target.id});if(e.success){let t=Object.assign({},this.target),s=e.status[e.status.length-1];this.socket.emit("order_changestate",{order:t,newstate:s}),this.iptsearch.model="",this.$store.commit("Preventa/updateState",{order:t,newstate:s}),this.$q.notify({color:"positive",message:`Pedido <b>${t.id}</b> enviado!!`,html:!0}),this.$refs.ipt_search.focus(),this.target=void 0,this.searching=!1}},skt_add_update_order(e){console.log("%cUna orden ha cambiado el","background:#7158e2;color:#fffa65;border-radius:10px;padding:8px;");let t=e.order,s=e.newstate,r=this.orders.findIndex((e=>e.id==t.id));r>=0?(console.log(`%cActualizar la orden ${t.id}...`,"background:#7158e2;color:#fffa65;border-radius:10px;padding:8px;"),this.appsounds.created.play(),this.$store.commit("Preventa/updateState",{order:t,newstate:s})):(console.log(`%cAgregar la orden ${t.id}...`,"background:#7158e2;color:#fffa65;border-radius:10px;padding:8px;"),this.appsounds.created.play(),this.$store.commit("Preventa/newOrder",t))},orderclicked(e){console.log(e)}},beforeDestroy(){this.socket.emit("unjoin",{profile:this.profile,workpoint:this.workin.workpoint,room:"checkin"})},destroyed(){this.$store.commit("Preventa/setHeaderState",!0)},computed:{orders(){return this.$store.getters["Preventa/OrdersCheckIn"]},profile(){return this.$store.getters["Account/profile"]},workin(){return this.$store.getters["Account/workin"]},appsounds(){return this.$store.getters["Multimediapp/sounds"]}}},d=n,c=(s("debb"),s("2877")),p=s("9989"),h=s("a154"),l=s("0016"),u=s("f09f"),m=s("a370"),f=s("9149"),g=s("068f"),k=s("eebe"),b=s.n(k),v=Object(c["a"])(d,r,o,!1,null,"a3db9188",null);t["default"]=v.exports;b()(v,"components",{QPage:p["a"],QSpinnerBars:h["a"],QIcon:l["a"],QCard:u["a"],QCardSection:m["a"],QSpinnerHourglass:f["a"],QImg:g["a"]})}}]);