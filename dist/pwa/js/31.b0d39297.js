(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[31],{a458:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t._self._c;return e("q-page",["running"!=t.soundAuth.state?e("q-banner",{staticClass:"text-white bg-red",attrs:{"inline-actions":""},scopedSlots:t._u([{key:"avatar",fn:function(){return[e("q-icon",{attrs:{name:"volume_off",color:"white"}})]},proxy:!0}],null,!1,1547534161)},[t._v("\n\t\t\tEl permiso del sonido no esta habilitado!\n\t\t\t")]):t._e(),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6 col-xs-12 q-pa-md"},[e("q-table",{attrs:{dark:"",data:t.forsupply,columns:t.tableforsupply.columns,filter:t.tableforsupply.filtrator,pagination:t.tableforsupply.pagination,"card-class":"bg-darkl1",separator:"none"},scopedSlots:t._u([{key:"top-left",fn:function(){return[e("div",[e("q-icon",{attrs:{name:"fas fa-power-off",color:t.forsupplystate?"green-13":"grey-7",size:"1.2em"}}),t._v(" Por surtir [ "+t._s(t.forsupply.length)+" ]\n\t\t\t\t\t\t")],1)]},proxy:!0},{key:"top-right",fn:function(){return[e("q-input",{attrs:{borderless:"",dark:"",filled:"",dense:"","fill-input":"",color:"green-13",debounce:"0",placeholder:"Buscar..."},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.tableforsupply.filtrator,callback:function(e){t.$set(t.tableforsupply,"filtrator",e)},expression:"tableforsupply.filtrator"}})]},proxy:!0},{key:"no-data",fn:function(){return[e("div",{staticClass:"full-width row flex-center q-gutter-sm q-pa-md"},[e("q-icon",{attrs:{size:"2em",name:"sentiment_dissatisfied"}}),e("span",[t._v("Nada por aqui.")])],1)]},proxy:!0},{key:"body",fn:function(a){return[e("q-tr",{on:{click:function(e){return t.orderclicked(a.row)}}},[e("q-td",{key:"id"},[e("div",[t._v(t._s(a.row.id))]),e("div",{staticClass:"text--1 text-grey-5"},[t._v(t._s(t.filltkt(a.row.num_ticket)))])]),e("q-td",{key:"client"},[t._v(t._s(a.row.name))]),e("q-td",{key:"cstate",class:`st-${a.row.status.id}`,attrs:{align:"center"}},[e("div",{staticClass:"text--1"},[t._v(t._s(a.row.status.name))]),e("div",{staticClass:"text--2 text-grey-5"},[t._v(t._s(t.humantime(a.row.updated_at)))])]),e("q-td",{key:"createdby",attrs:{align:"center"}},[e("div",[e("q-img",{staticClass:"imguser2",attrs:{src:r("2645"),width:"20px",height:"20px"}})],1),e("div",{staticClass:"text--1"},[t._v(t._s(a.row.created_by.nick))])])],1)]}}])})],1),e("div",{staticClass:"col-md-6 col-xs-12 q-pa-md"},[e("q-table",{attrs:{dark:"",data:t.onsupply,columns:t.tablesupply.columns,filter:t.tablesupply.filtrator,pagination:t.tablesupply.pagination,"card-class":"bg-darkl1",separator:"none"},scopedSlots:t._u([{key:"top-left",fn:function(){return[t._v("Surtiendo [ "+t._s(t.onsupply.length)+" ]")]},proxy:!0},{key:"top-right",fn:function(){return[e("q-input",{attrs:{borderless:"",dark:"",filled:"",dense:"","fill-input":"",color:"green-13",debounce:"0",placeholder:"Buscar..."},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.tablesupply.filtrator,callback:function(e){t.$set(t.tablesupply,"filtrator",e)},expression:"tablesupply.filtrator"}})]},proxy:!0},{key:"no-data",fn:function(){return[e("div",{staticClass:"full-width row flex-center q-gutter-sm q-pa-md"},[e("q-icon",{attrs:{size:"2em",name:"sentiment_dissatisfied"}}),e("span",[t._v("Nada por aqui.")])],1)]},proxy:!0},{key:"body",fn:function(a){return[e("q-tr",{on:{click:function(e){return t.orderclicked(a.row)}}},[e("q-td",{key:"id"},[e("div",[t._v(t._s(a.row.id))]),e("div",{staticClass:"text--1 text-grey-5"},[t._v(t._s(t.filltkt(a.row.num_ticket)))])]),e("q-td",{key:"client"},[t._v(t._s(a.row.name))]),e("q-td",{key:"cstate",class:`st-${a.row.status.id}`,attrs:{align:"center"}},[e("div",{staticClass:"text--1"},[t._v(t._s(a.row.status.name))]),e("div",{staticClass:"text--2 text-grey-5"},[t._v(t._s(t.humantime(a.row.updated_at)))])]),e("q-td",{key:"createdby",attrs:{align:"center"}},[e("div",[e("q-img",{staticClass:"imguser2",attrs:{src:r("2645"),width:"20px",height:"20px"}})],1),e("div",{staticClass:"text--1"},[t._v(t._s(a.row.created_by.nick))])])],1)]}}])})],1)]),e("q-dialog",{attrs:{position:"bottom"},model:{value:t.wndPrinters.state,callback:function(e){t.$set(t.wndPrinters,"state",e)},expression:"wndPrinters.state"}},[e("q-card",{staticClass:"bg-darkl1 text-white exo",attrs:{flat:""}},[e("q-card-section",{staticClass:"text-overline bg-blue-grey-9"},[t._v("Seleccione Impresora")]),e("PrinterSelect",{on:{input:t.reprint}})],1)],1)],1)},s=[],n=r("5542"),i=r("bd4c"),o=r("6d5d"),l=r("3a84"),d={name:"PreventaWarehouse",components:{OrdersList:o["a"],PrinterSelect:l["a"]},data(){return{soundAuth:new AudioContext,wndPrinters:{state:!1},orderselected:null,printerselected:null,socket:this.$sktPreventa,tableforsupply:{filtrator:"",columns:[{name:"id",field:"id",sortable:!0,label:"Folio",align:"center"},{name:"client",field:"name",sortable:!0,label:"Cliente",align:"center"},{name:"cstate",field:t=>t.status.id,sortable:!0,label:"Estado",align:"center"},{name:"createdby",field:t=>t.created_by.nick,sortable:!0,label:"Agente",align:"center"}],pagination:{rowsPerPage:20}},tablesupply:{filtrator:"",columns:[{name:"id",field:"id",sortable:!0,label:"Folio",align:"center"},{name:"client",field:"name",sortable:!0,label:"Cliente",align:"center"},{name:"cstate",field:t=>t.status.id,sortable:!0,label:"Estado",align:"center"},{name:"createdby",field:t=>t.created_by.nick,sortable:!0,label:"Agente",align:"center"}],pagination:{rowsPerPage:20}}}},beforeMount(){this.$store.commit("Preventa/setHeaderTitle","Preventa | Surtido")},methods:{orderclicked(t){this.orderselected=t,this.wndPrinters.state=!0},async reprint(t){console.log(t),this.printerselected=t,this.$q.loading.show({message:"Reimprimiendo..."});let e={_order:this.orderselected.id,_printer:t.id},r=await n["a"].reprint(e);r.err?this.$q.notify({message:r.err,color:"negative",icon:"fas fa-exclamation-triangle"}):(this.$q.loading.hide(),this.wndPrinters.state=!1,this.$q.notify({message:"Impresion correcta.",color:"positive",icon:"done"}))}},computed:{forsupplystate(){return this.$store.getters["Preventa/keepProcess"](4)},filltkt(){return t=>{let e=4,r=t.toString().length,a="";for(e;r<e;e--)a+="0";return`${a}${t}`}},orders(){return this.$store.getters["Preventa/OrdersWarehouse"]},forsupply(){return this.orders.filter((t=>4==t.status.id))},onsupply(){return this.orders.filter((t=>5==t.status.id))},profile(){return this.$store.getters["Account/profile"]},workin(){return this.$store.getters["Account/workin"]},printers(){return this.$store.getters["Preventa/printersWarehouse"]},humantime(){return t=>{let e=Date.now(),r=Date.parse(t),a=i["b"].getDateDiff(e,r,"days");switch(a){case 0:return i["b"].formatDate(r,"hh:mm a");case 1:return"Ayer, "+i["b"].formatDate(r,"hh:mm a");default:return`Hace ${a} dias, `+i["b"].formatDate(r,"hh:mm a")}}},appsounds(){return this.$store.getters["Multimediapp/sounds"]}}},c=d,u=r("2877"),p=r("9989"),f=r("54e1"),m=r("0016"),b=r("eaac"),g=r("27f9"),y=r("bd08"),h=r("db86"),v=r("068f"),_=r("24e8"),k=r("f09f"),w=r("a370"),q=r("eebe"),x=r.n(q),C=Object(u["a"])(c,a,s,!1,null,null,null);e["default"]=C.exports;x()(C,"components",{QPage:p["a"],QBanner:f["a"],QIcon:m["a"],QTable:b["a"],QInput:g["a"],QTr:y["a"],QTd:h["a"],QImg:v["a"],QDialog:_["a"],QCard:k["a"],QCardSection:w["a"]})}}]);